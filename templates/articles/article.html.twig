{% extends "base.html.twig" %}

{# Set Article's variables #}
{% if article %}
    {% set articleTitle = article.title %}
    {% set articleDescription = article.description %}
    {% set articleUrl = article.url %}
    {% set articleContent = article.content %}
    {% set articleImage = article.getImage %}
    {% set articleImageAlt = article.getImage.title %}
    {% set articleDate = article.date %}
    {% set articleUpdate = article.getUpdateAt %}
    {% set genderOption = article.getGenderOption %}
{% endif %}

{# 
# Set up date variables.
# Use seconds to compare date.
# This date is +1hour to UK time
# it is like Italy time
#}
{% set getDateToday = "now"|date('U') %}

{% block title %}
    <title>{{ articleTitle|raw }}</title>
{% endblock %}

{% block description %}
    <meta name="Description" CONTENT="{{ articleDescription|raw }}">
{% endblock %}

{% block data_structure %}
    <script type="application/ld+json">
        {
            "@context": "https://schema.org/",
            "@type": "Article",
            "headline": "{{ articleTitle|raw }}"
        },
        {
            "datePublished": "{{ articleDate|date('Y-m-d') }}",
            "dateModified": "{{ articleUpdate|date('Y-m-d') }}",
            "author" {
                "@type": "Person",
                "name": "Marco Valeri",
            },
        }
    </script>
{% endblock %}

{% block canonical %}
    <link rel="canonical" href="https://www.marcovaleri.net/articoli/{{ articleUrl }}">
{% endblock %}

{% block body %}
    <div class="content__title">
        <h1>{{ articleTitle }}</h1>
    </div>
    <div class="content__data">
        <ul class="list-no-style">
            <li class="content__data-item">Autore: Marco Valeri</li>
            <li class="content__data-item">Pubblicato il: {{ articleDate|date('d-m-Y') }}</li>
            <li class="content__data-item">Ultima modifica: {{ articleUpdate|date('d-m-Y') }}</li>
        </ul>
    </div>
    {% if genderOption %}
        <div class="content__gender-banner">
        <p id="gender-legend" class="p rainbow">Sentiti libero...</p>
            <ul class="list-no-style">
                <li class="content__gender-item"><img id="gender-male" class="content__gender-icon content__gender-icon--active" src="../images/male-icon.png" alt="Male Simbol Icon"></li>
                <li class="content__gender-item"><img id="gender-female" class="content__gender-icon" src="../images/female-icon.png" alt="Male Simbol Icon"></li>
                <li class="content__gender-item"><img id="gender-non-binary" class="content__gender-icon" src="../images/non-binary-icon.png" alt="Male Simbol Icon"></li>
            </ul>
            <p class="p rainbow">...di scegliere il linguaggio che preferisci</p>
        </div>
    {% endif %}
    <div class="content__main">
        {{ articleContent | raw }}
    </div>
    <div class="content__image">
        <img class="content__image-picture" src="../images/{{ articleImage }}" alt="{{ articleImageAlt }}">
    </div>
{% endblock %}